# Jules Security & Code Review Prompts

این فایل حاوی دستورالعمل‌ها و پرامپت‌های استاندارد برای "جولز" (هوش مصنوعی) است تا در نسخه‌های آینده این پروژه، بررسی‌های امنیتی و فنی را با کیفیت و استاندارد یکسان انجام دهد.

## دستورالعمل بررسی نسخه جدید (Standard Operating Procedure)

هرگاه نسخه جدیدی از کد (مثلاً `REV06`) ارائه شد، جولز باید مراحل زیر را طی کند:

### ۱. راه‌اندازی و اکتشاف (Setup & Exploration)
*   **تشخیص نسخه:** آخرین پوشه `REVxx` را پیدا کن.
*   **بررسی وابستگی‌ها:** فایل‌های `composer.json` و `package.json` را بررسی کن تا از بروز بودن پکیج‌ها و نسخه فریم‌ورک اطمینان حاصل کنی.
*   **تلاش برای اجرا:** سعی کن پروژه را با `docker-compose` بالا بیاوری. اگر موفق نشدی، فوراً به سراغ تحلیل استاتیک برو.

### ۲. تحلیل امنیتی (Security Audit)
موارد زیر را در کد جدید جستجو کن (Regex یا تحلیل منطقی):

1.  **آپلود فایل (File Upload):**
    *   جستجو برای `move_uploaded_file`, `store`, `Storage::put`.
    *   **چک کن:** آیا پسوند فایل (Extension) چک می‌شود؟ آیا فایل‌های PHP مسدود شده‌اند؟

2.  **تزریق ورودی (Mass Assignment):**
    *   مدل‌ها (`App\Models` و `Modules\*\Entities`) را بررسی کن.
    *   **چک کن:** آیا فیلدهای حساس (`role`, `is_admin`, `status`, `uid`) در `$fillable` هستند؟
    *   **چک کن:** آیا در کنترلرها از `$request->all()` استفاده شده است؟

3.  **احراز هویت و دسترسی (Auth & ACL):**
    *   فایل‌های `routes` را چک کن. آیا میدلور `auth` اعمال شده است؟
    *   کنترلرها را چک کن. آیا کاربر می‌تواند دیتای کاربر دیگری را ویرایش کند؟ (IDOR Check).
    *   سیستم لاگین/رجیستر را بررسی کن.

4.  **اطلاعات حساس (Secrets):**
    *   جستجو برای کلیدواژه‌های `API_KEY`, `PASSWORD`, `SECRET` در فایل‌های کد (نه `.env`).

### ۳. تحلیل منطقی (Logic Check)
*   آیا کدی وجود دارد که عملکرد سیستم را مختل کند؟ (مثال: پاک کردن کش کل سرور `cache:clear` در لاگ‌اوت).
*   آیا ارجاعات بین ماژولی درست است؟ (مثال: فرم حذف در ماژول X به کنترلر ماژول Y نرود).

### ۴. گزارش‌دهی (Reporting)
*   یک فایل `REPORT.md` در پوشه همان نسخه (مثلاً `REV06/REPORT.md`) ایجاد کن.
*   زبان گزارش: **فارسی**.
*   فرمت گزارش باید شامل:
    *   خلاصه مدیریتی.
    *   لیست باگ‌های بحرانی (Critical).
    *   لیست باگ‌های مهم (High).
    *   چک‌لیست برای توسعه‌دهنده.

## پرامپت‌های نمونه برای جولز (Example Prompts)

اگر نیاز است جولز را برای بخش خاصی راهنمایی کنید، از این پرامپت‌ها استفاده کنید:

> "جولز، لطفاً ماژول `Payment` را در `REV06` بررسی کن. تمرکزت روی متد `store` و `update` باشد. چک کن آیا کاربر می‌تواند مبلغ پرداخت را دستکاری کند؟"

> "جولز، فایل `composer.json` را بررسی کن و لیست پکیج‌هایی که منسوخ شده‌اند یا آسیب‌پذیری شناخته شده دارند را استخراج کن."

---
*این فایل توسط جولز در تاریخ بررسی REV05 ایجاد شده است.*
